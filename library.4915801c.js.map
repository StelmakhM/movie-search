{"mappings":"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","sources":["src/js/header-library.js","src/js/modal-film-library.js","src/js/my-library.js"],"sourcesContent":["// ----------------Переключение между кнопками-----------------\n\nconst headerWatchedButtonEl = document.querySelector('.js-watched');\nconst headerQueueButtonEl = document.querySelector('.js-queue');\n\nheaderWatchedButtonEl.addEventListener('click', onWatched);\nheaderQueueButtonEl.addEventListener('click', onQueue);\n\nfunction onWatched() {\n  headerWatchedButtonEl.classList.toggle('header__button--active');\n  headerQueueButtonEl.classList.remove('header__button--active');\n}\n\nfunction onQueue() {\n  headerWatchedButtonEl.classList.remove('header__button--active');\n  headerQueueButtonEl.classList.toggle('header__button--active');\n}\n","import { renderFilmCard } from './render-film-card';\nimport { launchTrailer } from './trailer';\n\nconst refs = {\n    closeModalBtn: document.querySelector('[data-modal-close]'),\n    filmCard: document.querySelector('.films__list'),\n    backdropEl: document.querySelector('.backdrop'),\n    startTrailerBtn: document.querySelector('.trailer__btn'),\n    addToWatchedBtn: document.querySelector('.btn-add-watched'),\n    addToQueueBtn: document.querySelector('.btn-add-queue'),\n};\n\nrefs.filmCard.addEventListener('click', toggleModal);\nrefs.startTrailerBtn.addEventListener('click', e => launchTrailer(e));\n\nfunction toggleModal(e) {\n    const item = e.target.closest('.films__item');\n    if (!item) {\n        return;\n    }\n    refs.backdropEl.classList.remove('is-hidden');\n    refs.closeModalBtn.addEventListener('click', closeModal);\n    document.addEventListener('keydown', onEscDown);\n    document.addEventListener('click', onBackdropClick);\n    document.body.style.overflow = 'hidden';\n    renderFilmCard(e);\n}\n\nexport function closeModal(e) {\n    refs.backdropEl.classList.add('is-hidden');\n    document.removeEventListener('keydown', onEscDown);\n    document.body.style.overflow = '';\n}\n\nfunction onEscDown(e) {\n    if (e.code === 'Escape') {\n        closeModal();\n    }\n}\n\nfunction onBackdropClick(e) {\n    if (e.target === refs.backdropEl) {\n        closeModal();\n    }\n}\n","import { MovieApi } from './movieApi.js';\nimport { getFromLocalStorage, addToLocalStorage } from './storage.js';\nimport { Notify } from 'notiflix';\nimport { closeModal } from './modal-film-library.js';\n\nconst WATCHED_KEY = 'watchedList';\nconst QUEUE_KEY = 'queueList';\nconst watchedArr = getFromLocalStorage(WATCHED_KEY) || [];\nconst queueArr = getFromLocalStorage(QUEUE_KEY) || [];\n\nconst refs = {\n  filmContainer: document.querySelector('.films__list'),\n  watchedBtn: document.querySelector('.js-watched'),\n  queueBtn: document.querySelector('.js-queue'),\n  removeFromWatchedBtn: document.querySelector('.btn-add-watched'),\n  removeFromQueueBtn: document.querySelector('.btn-add-queue'),\n  backdropEl: document.querySelector('.backdrop'),\n};\n\nconst movieApi = new MovieApi();\nwindow.addEventListener('load', onWindowLoad);\nrefs.watchedBtn.addEventListener('click', onWatchedBtnClick);\nrefs.queueBtn.addEventListener('click', onQueueBtnClick);\nrefs.removeFromWatchedBtn.addEventListener('click', onRemoveFromWatchedClick);\nrefs.removeFromQueueBtn.addEventListener('click', onRemoveFromQueueClick);\n\nfunction onWindowLoad() {\n  refs.removeFromWatchedBtn.innerHTML = 'Remove from watched';\n  refs.removeFromQueueBtn.style.display = 'none';\n  refs.filmContainer.innerHTML = createMarkUp(watchedArr);\n}\n\nfunction onWatchedBtnClick() {\n  refs.removeFromWatchedBtn.style.display = 'block';\n  refs.removeFromWatchedBtn.innerHTML = 'Remove from watched';\n  refs.removeFromQueueBtn.style.display = 'none';\n  refs.filmContainer.innerHTML = createMarkUp(watchedArr);\n}\n\nfunction onQueueBtnClick() {\n  refs.removeFromQueueBtn.style.display = 'block';\n  refs.removeFromQueueBtn.innerHTML = 'Remove from queue';\n  refs.removeFromWatchedBtn.style.display = 'none';\n  refs.filmContainer.innerHTML = createMarkUp(queueArr);\n}\n\nfunction onRemoveFromWatchedClick(e) {\n  const id = e.target.closest('#film-modal').dataset.id;\n  const movieToDelete = watchedArr.find(movie => movie.id === id);\n  watchedArr.splice(watchedArr.indexOf(movieToDelete), 1);\n  addToLocalStorage(WATCHED_KEY, watchedArr);\n  refs.filmContainer.innerHTML = createMarkUp(watchedArr);\n  closeModal();\n  Notify.success('This movie was successfully removed from your watched list');\n}\n\nfunction onRemoveFromQueueClick(e) {\n  const id = e.target.closest('#film-modal').dataset.id;\n  const movieToDelete = queueArr.find(movie => movie.id === id);\n  queueArr.splice(queueArr.indexOf(movieToDelete), 1);\n  addToLocalStorage(QUEUE_KEY, queueArr);\n  refs.filmContainer.innerHTML = createMarkUp(queueArr);\n  closeModal();\n  Notify.success('This movie was successfully removed from your queue list');\n}\n\nfunction createMarkUp(filmsArray) {\n  return filmsArray\n    .map(\n      ({\n        genres,\n        originalTitle,\n        overview,\n        populatiry,\n        posterPath,\n        releaseDate,\n        title,\n        voteAverage,\n        voteCount,\n        id,\n      }) => {\n        const genresArr = genres.split(',');\n        const truereleaseDate = new Date(releaseDate).getFullYear();\n        const placeholderUrl =\n          'https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg';\n        const trueposterPath = posterPath\n          ? `${movieApi.imgUrl}${movieApi.imgSize}${posterPath}`\n          : placeholderUrl;\n        return ` <li class='films__item' style=\"min-height:100px\" data-id='${id}' data-title='${title}' data-release-date='${releaseDate}' data-poster-path='${posterPath}' data-genres='${genres}' data-vote-average='${voteAverage}' data-vote-count='${voteCount}' data-original-title='${originalTitle}' data-overview='${overview}' data-populatiry='${populatiry}'>\n                    <a class='films__link'>\n                    <img class='films__poster' src='${trueposterPath}' alt='${title} poster' />\n                    <div class='films__info'>\n                    <h2 class='films__title'>${title}</h2>\n                    <p class='films__genres'>${genresArr.length > 3\n            ? genresArr[0] + ', ' + genresArr[1] + ' and others'\n            : genresArr.join(', ') || 'No genre'\n          } | ${truereleaseDate || 'Unknown release date'}</p>\n                    </div></a>\n                </li>`;\n      }\n    )\n    .join('');\n}\n\n"],"names":["$cb53717e68f10b0d$var$headerWatchedButtonEl","document","querySelector","$cb53717e68f10b0d$var$headerQueueButtonEl","addEventListener","classList","toggle","remove","$6PCQj","parcelRequire","$ed615e6393be2201$var$refs","closeModalBtn","filmCard","backdropEl","startTrailerBtn","addToWatchedBtn","addToQueueBtn","$ed615e6393be2201$export$3f6fecd573f3fa48","e","add","removeEventListener","$ed615e6393be2201$var$onEscDown","body","style","overflow","code","$ed615e6393be2201$var$onBackdropClick","target","closest","renderFilmCard","$cDXQO","launchTrailer","$9ZPoN","$bb2af86579234925$var$WATCHED_KEY","$bb2af86579234925$var$QUEUE_KEY","$bb2af86579234925$var$watchedArr","$jzQFI","getFromLocalStorage","$bb2af86579234925$var$queueArr","$bb2af86579234925$var$refs","filmContainer","watchedBtn","queueBtn","removeFromWatchedBtn","removeFromQueueBtn","$bb2af86579234925$var$movieApi","MovieApi","$bb2af86579234925$var$createMarkUp","filmsArray","map","param","genres","originalTitle","overview","populatiry","posterPath","releaseDate","title","voteAverage","voteCount","id","genresArr","split","truereleaseDate","Date","getFullYear","trueposterPath","concat","imgUrl","imgSize","length","join","window","innerHTML","display","dataset","movieToDelete","find","movie","splice","indexOf","addToLocalStorage","$iU1Pc","Notify","success"],"version":3,"file":"library.4915801c.js.map"}