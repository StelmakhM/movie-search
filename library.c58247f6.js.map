{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-e13f256190b6d2eb.js","src/js/header-library.js","src/js/modal-film-library.js","src/js/my-library.js","node_modules/@parcel/runtime-js/lib/runtime-b1e65466d27f23cf.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"2Y0K8\\\":\\\"library.c58247f6.js\\\",\\\"1skbY\\\":\\\"ghostlibrary.d8654048.png\\\",\\\"5UbS1\\\":\\\"index.3cacd64a.css\\\",\\\"2hvCh\\\":\\\"index.c956d4c5.js\\\"}\"));","// ----------------Переключение между кнопками-----------------\n\nconst headerWatchedButtonEl = document.querySelector('.js-watched');\nconst headerQueueButtonEl = document.querySelector('.js-queue');\n\nheaderWatchedButtonEl.addEventListener('click', onWatched);\nheaderQueueButtonEl.addEventListener('click', onQueue);\n\nfunction onWatched() {\n  headerWatchedButtonEl.classList.add('header__button--active');\n  headerQueueButtonEl.classList.remove('header__button--active');\n}\n\nfunction onQueue() {\n  headerWatchedButtonEl.classList.remove('header__button--active');\n  headerQueueButtonEl.classList.add('header__button--active');\n}\n","import { renderFilmCard } from './render-film-card';\nimport { launchTrailer } from './trailer';\n\nconst refs = {\n    closeModalBtn: document.querySelector('[data-modal-close]'),\n    filmCard: document.querySelector('.films__list'),\n    backdropEl: document.querySelector('.backdrop'),\n    startTrailerBtn: document.querySelector('.trailer__btn'),\n    addToWatchedBtn: document.querySelector('.btn-add-watched'),\n    addToQueueBtn: document.querySelector('.btn-add-queue'),\n};\n\nrefs.filmCard.addEventListener('click', toggleModal);\nrefs.startTrailerBtn.addEventListener('click', e => launchTrailer(e));\n\nfunction toggleModal(e) {\n    const item = e.target.closest('.films__item');\n    if (!item) {\n        return;\n    }\n    refs.backdropEl.classList.remove('is-hidden');\n    refs.closeModalBtn.addEventListener('click', closeModal);\n    document.addEventListener('keydown', onEscDown);\n    document.addEventListener('click', onBackdropClick);\n    document.body.style.overflow = 'hidden';\n    renderFilmCard(e);\n}\n\nexport function closeModal(e) {\n    refs.backdropEl.classList.add('is-hidden');\n    document.removeEventListener('keydown', onEscDown);\n    document.body.style.overflow = '';\n}\n\nfunction onEscDown(e) {\n    if (e.code === 'Escape') {\n        closeModal();\n    }\n}\n\nfunction onBackdropClick(e) {\n    if (e.target === refs.backdropEl) {\n        closeModal();\n    }\n}\n","import { MovieApi } from './movieApi.js';\nimport { getFromLocalStorage, addToLocalStorage } from './storage.js';\nimport { Notify } from 'notiflix';\nimport { closeModal } from './modal-film-library.js';\nimport placeholderImagePath from '../images/ghostlibrary.png';\n\n\nconst WATCHED_KEY = 'watchedList';\nconst QUEUE_KEY = 'queueList';\nconst watchedArr = getFromLocalStorage(WATCHED_KEY) || [];\nconst queueArr = getFromLocalStorage(QUEUE_KEY) || [];\nconst isCreated = false;\n\nconst refs = {\n  filmContainer: document.querySelector('.films__list'),\n  watchedBtn: document.querySelector('.js-watched'),\n  queueBtn: document.querySelector('.js-queue'),\n  removeFromWatchedBtn: document.querySelector('.btn-add-watched'),\n  removeFromQueueBtn: document.querySelector('.btn-add-queue'),\n  backdropEl: document.querySelector('.backdrop'),\n};\n\nconst movieApi = new MovieApi();\nwindow.addEventListener('load', onWindowLoad);\nrefs.watchedBtn.addEventListener('click', onWatchedBtnClick);\nrefs.queueBtn.addEventListener('click', onQueueBtnClick);\nrefs.removeFromWatchedBtn.addEventListener('click', onRemoveFromWatchedClick);\nrefs.removeFromQueueBtn.addEventListener('click', onRemoveFromQueueClick);\n\nfunction onWindowLoad() {\n  if (!watchedArr.length) {\n    createPlaceholder();\n    return;\n  }\n  refs.removeFromWatchedBtn.innerHTML = 'Remove from watched';\n  refs.removeFromQueueBtn.style.display = 'none';\n  refs.filmContainer.innerHTML = createMarkUp(watchedArr);\n}\n\nfunction onWatchedBtnClick() {\n  if (!watchedArr.length && refs.filmContainer.innerHTML === '') {\n    createPlaceholder();\n    return;\n  }\n  if (refs.filmContainer.firstElementChild.classList.contains('empty__container')) {\n    return;\n  }\n  refs.removeFromWatchedBtn.style.display = 'block';\n  refs.removeFromWatchedBtn.innerHTML = 'Remove from watched';\n  refs.removeFromQueueBtn.style.display = 'none';\n  refs.filmContainer.innerHTML = createMarkUp(watchedArr);\n}\n\nfunction onQueueBtnClick() {\n  if (!queueArr.length && refs.filmContainer.innerHTML === '') {\n    createPlaceholder();\n    return;\n  }\n\n  refs.removeFromQueueBtn.style.display = 'block';\n  refs.removeFromQueueBtn.innerHTML = 'Remove from queue';\n  refs.removeFromWatchedBtn.style.display = 'none';\n  refs.filmContainer.innerHTML = createMarkUp(queueArr);\n  if (!queueArr.length && refs.filmContainer.innerHTML === '') {\n    createPlaceholder();\n    return;\n  }\n}\n\nfunction onRemoveFromWatchedClick(e) {\n  if (!watchedArr.length) {\n    createPlaceholder();\n    return;\n  }\n  const id = e.target.closest('#film-modal').dataset.id;\n  const movieToDelete = watchedArr.find(movie => movie.id === id);\n  watchedArr.splice(watchedArr.indexOf(movieToDelete), 1);\n  addToLocalStorage(WATCHED_KEY, watchedArr);\n  refs.filmContainer.innerHTML = createMarkUp(watchedArr);\n  closeModal();\n  Notify.success('This movie was successfully removed from your watched list');\n  if (!watchedArr.length) {\n    createPlaceholder();\n  }\n}\n\nfunction onRemoveFromQueueClick(e) {\n  if (!queueArr.length) {\n    createPlaceholder();\n  }\n  const id = e.target.closest('#film-modal').dataset.id;\n  const movieToDelete = queueArr.find(movie => movie.id === id);\n  queueArr.splice(queueArr.indexOf(movieToDelete), 1);\n  addToLocalStorage(QUEUE_KEY, queueArr);\n  refs.filmContainer.innerHTML = createMarkUp(queueArr);\n  closeModal();\n  Notify.success('This movie was successfully removed from your queue list');\n  if (!queueArr.length) {\n    createPlaceholder();\n  }\n\n}\n\nfunction createMarkUp(filmsArray) {\n  return filmsArray\n    .map(\n      ({\n        genres,\n        originalTitle,\n        overview,\n        populatiry,\n        posterPath,\n        releaseDate,\n        title,\n        voteAverage,\n        voteCount,\n        id,\n      }) => {\n        const genresArr = genres.split(',');\n        const truereleaseDate = new Date(releaseDate).getFullYear();\n        const placeholderUrl =\n          'https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg';\n        const trueposterPath = posterPath\n          ? `${movieApi.imgUrl}${movieApi.imgSize}${posterPath}`\n          : placeholderUrl;\n        return ` <li class='films__item' style=\"min-height:100px\" data-id='${id}' data-title='${title}' data-release-date='${releaseDate}' data-poster-path='${posterPath}' data-genres='${genres}' data-vote-average='${voteAverage}' data-vote-count='${voteCount}' data-original-title='${originalTitle}' data-overview='${overview}' data-populatiry='${populatiry}'>\n                    <a class='films__link'>\n                    <img class='films__poster' src='${trueposterPath}' alt='${title} poster' />\n                    <div class='films__info'>\n                    <h2 class='films__title'>${title}</h2>\n                    <p class='films__genres'>${genresArr.length > 3\n            ? genresArr[0] + ', ' + genresArr[1] + ' and others'\n            : genresArr.join(', ') || 'No genre'\n          } | ${truereleaseDate || 'Unknown release date'}</p>\n                    </div></a>\n                </li>`;\n      }\n    )\n    .join('');\n}\n\nfunction createPlaceholder() {\n  const placeholder = document.createElement('li');\n  placeholder.classList.add('empty__container');\n\n  const img = document.createElement('img');\n  img.src = placeholderImagePath;\n  img.alt = 'Empty library';\n  img.classList.add('empty__image');\n  placeholder.append(img);\n  refs.filmContainer.append(placeholder);\n  isCreated = true;\n}","module.exports = require('./helpers/bundle-url').getBundleURL('2Y0K8') + require('./helpers/bundle-manifest').resolve(\"1skbY\");"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$cb53717e68f10b0d$var$headerWatchedButtonEl","document","querySelector","$cb53717e68f10b0d$var$headerQueueButtonEl","addEventListener","classList","add","remove","$6PCQj","$ed615e6393be2201$var$refs","closeModalBtn","filmCard","backdropEl","startTrailerBtn","addToWatchedBtn","addToQueueBtn","$ed615e6393be2201$export$3f6fecd573f3fa48","e","removeEventListener","$ed615e6393be2201$var$onEscDown","body","style","overflow","code","$ed615e6393be2201$var$onBackdropClick","target","closest","renderFilmCard","$cDXQO","launchTrailer","$9ZPoN","$63917bfc048cc0d7$exports","getBundleURL","resolve","$bb2af86579234925$var$WATCHED_KEY","$bb2af86579234925$var$QUEUE_KEY","$bb2af86579234925$var$watchedArr","$jzQFI","getFromLocalStorage","$bb2af86579234925$var$queueArr","$bb2af86579234925$var$refs","filmContainer","watchedBtn","queueBtn","removeFromWatchedBtn","removeFromQueueBtn","$bb2af86579234925$var$movieApi","MovieApi","$bb2af86579234925$var$createMarkUp","filmsArray","map","param","genres","originalTitle","overview","populatiry","posterPath","releaseDate","title","voteAverage","voteCount","genresArr","split","truereleaseDate","Date","getFullYear","trueposterPath","concat","imgUrl","imgSize","join","$bb2af86579234925$var$createPlaceholder","placeholder","createElement","img","src","$parcel$interopDefault","alt","append","window","innerHTML","display","firstElementChild","contains","dataset","movieToDelete","find","movie","splice","indexOf","addToLocalStorage","$iU1Pc","Notify","success"],"version":3,"file":"library.c58247f6.js.map"}